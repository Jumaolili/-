<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    
</body>
<script>
    //对象转为数组：

    var scoreObject = {
        "Tony": {
            "Math": 95,
            "English": 79,
            "Music": 68
        },
        "Simon": {
            "Math": 100,
            "English": 95,
            "Music": 98
        },
        "Annie": {
            "Math": 54,
            "English": 65,
            "Music": 88
        }
    }
    //如上有一个用来存储学习成绩的对象，编写一个函数，将其转为如下的二维数组

    var scoreArray = [
        ["Tony", 95, 79, 68],
    ];

    
    
    function toArray(obj) {
        var arr = [];
        var name = Object.keys(obj);

        for (var i = 0; i < name.length;i++) {
            var son = [];
            son.push(name[i]);
            son.push(obj[name[i]]["Math"]);
            son.push(obj[name[i]]["English"]);
            son.push(obj[name[i]]["Music"]);

            arr.push(son);
        }
        console.log(arr);
    }
    //toArray(scoreObject);


    //数组转为对象：

    var menuArr = [
        [1, "Area1", -1],
        [2, "Area2", -1],
        [3, "Area1-1", 1],
        [4, "Area1-2", 1],
        [5, "Area2-1", 2],
        [6, "Area2-2", 2],
        [7, "Area1-2-3", 4],
        [8, "Area2-2-1", 6],
    ];
    //如上有一个用来存储多级菜单数据的数组，编写一个函数，将其转为如下的对象
    //console.log(parseInt(menuArr[0][1]));
    function tranform(array) {
        var arr1 = [],
            arr2 = [],
            arr3 = [];
        for (var i = 0; i < array.length; i++) {
            var num = array[i][1].match(/\d/g).length
            if (num == 1) {
                arr1.push(array[i]);
            }
            if (num == 2) {
                arr2.push(array[i]);
            }
            if (num == 3) {
                arr3.push(array[i]);
            }
        }
        arr1.sort((a, b) => {
            var num1 = Number(a[1].match(/\d/g).join(""));
            var num2 = Number(b[1].match(/\d/g).join(""));
            if (num1 > num2) {
                return 1;
            } else if (num1 < num2) {
                return -1;
            }
        });
        arr2.sort((a, b) => {
            var num1 = Number(a[1].match(/\d/g).join(""));
            var num2 = Number(b[1].match(/\d/g).join(""));
            if (num1 > num2) {
                return 1;
            } else if (num1 < num2) {
                return -1;
            }
        });
        arr3.sort((a, b) => {
            var num1 = Number(a[1].match(/\d/g).join(""));
            var num2 = Number(b[1].match(/\d/g).join(""));
            if (num1 > num2) {
                return 1;
            } else if (num1 < num2) {
                return -1;
            }
        });


        //console.log(arr1);
        //console.log(arr2);
        //console.log(arr3);
        var obj = {};
        //console.log(typeof arr1[0][0] == "number");
        for (let i = 0; i < arr1.length; i++) {
            obj[arr1[i][0].toString()] = {//一级标题
                name: arr1[i][1],
                subMenu: {
                    //用来装二级标题
                }
            };
        }

        //console.log(typeof arr2[0][1].match(/\d/g).join("")[0] == "string");
        for (let j = 0; j < arr2.length; j++) {
            
            if (arr2[j][1].match(/\d/g).join("")[0] == "1") {
                obj["1"].subMenu[arr2[j][0].toString()] = {
                    name: arr2[j][1],
                    subMenu: {
                        //用于装arr3的三级标题
                    }
                }
            }
            if (arr2[j][1].match(/\d/g).join("")[0] == "2") {  //Error
                obj["2"].subMenu[arr2[j][0].toString()] = {
                    name: arr2[j][1],
                    subMenu: {
                        //用于装arr3的三级标题
                    }
                }
            }
            
        }


        for (let k = 0; k < arr3.length; k++) {  //遍历三级标题
            if (arr3[k][1].match(/\d/g).join("")[0] == "1") {   //获取三级标题num1-num2-num3部分 一级索引num1
                var second = arr3[k][1].match(/\d/g).join("")[1]; //二级标题
                var attrName = "";

                
                for (var q = 0; q < arr2.length; q++) {
                    if (arr2[q][1].match(/\d/g).join("")[1] == second && arr2[q][1].match(/\d/g).join("")[0] == "1") {
                        attrName = arr2[q][0].toString();
                    }
                }


                obj["1"].subMenu[attrName].subMenu[arr3[k][0]] = {
                    name: arr3[k][1],
                    subMenu: {

                    }
                }
                
            }
            if (arr3[k][1].match(/\d/g).join("")[0] == "2") {   //获取三级标题num1-num2-num3部分 一级索引num1
                var second = arr3[k][1].match(/\d/g).join("")[1]; //二级标题
                var attrName = "";


                for (var q = 0; q < arr2.length; q++) {
                    if (arr2[q][1].match(/\d/g).join("")[1] == second && arr2[q][1].match(/\d/g).join("")[0] == "2") {
                        attrName = arr2[q][0].toString();
                    }
                }


                obj["2"].subMenu[attrName].subMenu[arr3[k][0]] = {
                    name: arr3[k][1],
                    subMenu: {

                    }
                }

            }
            //if (arr3[k][1].match(/\d/g).join("")[1] == "2") {
            //    var keyName = "";
            //    var index_k = k;
            //    for (let q = 0; q < arr2.length; q++) {
            //            if (arr2[q][1].match(/\d/g)[1].toString() == "2") {
            //                keyName = arr2[q][0].toString();
            //                obj["2"].subMenu[keyName].subMenu[arr3[q][0].toString()] = {
            //                    name: arr3[index_k][1],
            //                subMenu: {

            //                }
            //            }
            //        }
                    
            //    }
                
            //}
        }
        console.log(obj);


        
    }
    tranform(menuArr);
    
    var menuObject = {
        "1": {
            name: "Area1",
            subMenu: {
                "3": {
                    name: "Area1-1"
                },
                "4": {
                    name: "Area1-2",
                    subMenu: {
                        "7": {
                            name: "Area1-2-3"
                        }
                    }
                }
            }
        }
    
   

}
</script>
</html>